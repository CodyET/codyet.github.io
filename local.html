<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>G8 Starter</title>
  <script src="http://code.jquery.com/jquery-1.10.2.js"></script>
</head>
<body>


Access Token: <input type="text" id="accessToken" name="accessToken" value="4a01ea37e04076c00ff870c24aee67b62b4122c0"><br/><br/>
Device ID: <input type="text" id="deviceID" name="deviceID" value="54ff71066672524842511067">


<form action="/" id="submitForm">
  
<br/><br/>


<button id="unlock" style="width: 450px; height: 300px;" id="Unlock"><font size="10">Unlock</font></button>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<button id="lock" style="width: 450px; height: 300px;" id="Lock"><font size="10">Lock</font></button>
<br><br><br>
<button id="trunk" style="width: 450px; height: 300px;" id="Trunk"><font size="10">Trunk</font></button>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<button id="start" style="width: 450px; height: 300px;" id="Start"><font size="10">Start</font></button>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<button id="eng" style="width: 900px; height: 300px;" id="Stop Engine"><font size="10">Start</font></button>

<br/><br/>

Raw Command: <input type="text" id="commandToSend" disabled=true name="s" placeholder="Command">
<input type="submit" id="sendButton" value="Send">

</form>

<!-- the result of the command will be rendered inside this div -->
<br/><div id="result" style="font-weight: bold;"></div>

<script>
// Need a function string variable 
var fn = "NO_COMMAND_SET";
$("#unlock").click( function()
{
  fn = "UNLOCK";
  updateCommand();
});
$("#lock").click( function()
{
  fn = "LOCK";
  updateCommand();
});
$("#trunk").click( function()
{
  fn = "TRUNK";
  updateCommand();
});
$("#start").click( function()
{
  fn = "START";
  updateCommand();
});
$("#stopeng").click( function()
{
  fn = "ENG";
  updateCommand();
});
function updateCommand()
{
  $( "#commandToSend" ).val("" + fn);
}
// Attach a submit handler to the form
$( "#submitForm" ).submit(function( event ) {
  // Stop form from submitting normally
  event.preventDefault();
  $( "#result" ).empty().append("Sending...");
  $( "#sendButton").prop("disabled",true);
  // Get some values from elements on the page:
  var $form = $( this ),
    term = $form.find( "input[name='s']" ).val(),
    accessToken = $("#accessToken").val(),
    deviceID = $( "#deviceID" ).val();
 
  var url = "https://api.spark.io/v1/devices/" + deviceID + "/rc";
  // Send the data using post
  var posting = $.post( url, { args: term, access_token: accessToken} );
 
  // Put the results in a div
  posting.done(function( data ) {
    $( "#sendButton").prop("disabled",false);
    if(data.return_value > 0)
      $( "#result" ).empty().append( "Command succeeded! ");
    else
      $( "#result" ).empty().append( "Command failed! ");
    console.log(data);
  });
  posting.error(function (data) {
    $( "#sendButton").prop("disabled",false);
    $( "#result" ).empty().append( "Command failed! Did you forget to fill out the device ID and access token?");
  });
});
</script>

</body>
</html>
